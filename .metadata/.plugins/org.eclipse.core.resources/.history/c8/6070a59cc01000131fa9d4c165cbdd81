package kroki.app.generators.django;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStreamWriter;
import java.util.Map;
import java.util.TreeMap;

import kroki.profil.utils.DatabaseProps;

import freemarker.cache.FileTemplateLoader;
import freemarker.template.Configuration;
import freemarker.template.DefaultObjectWrapper;
import freemarker.template.Template;

public class SettingsFileGenerator {

	@SuppressWarnings({ "unused", "rawtypes" })
	public void generateSettingsFile(String filePath,String projectName,DatabaseProps databasePropertires){
		
		String projectRoot=filePath+File.separator+projectName;
		String krokiRoot=new File("").getAbsolutePath();
		
		Configuration cfg = new Configuration();
		cfg.setObjectWrapper(new DefaultObjectWrapper());
		FileTemplateLoader templateLoader;
		
		try {
			templateLoader = new FileTemplateLoader(new File(krokiRoot + File.separator+"src/kroki/app/generators/templates/django"));
			cfg.setTemplateLoader(templateLoader);
			Template tpl = cfg.getTemplate("settings.ftl");
			
			File fout=new File(projectRoot+File.separator+projectName+File.separator+"settings.py");
			OutputStreamWriter writer = new OutputStreamWriter(new FileOutputStream(fout));
			Map model = new TreeMap();
			
			// odredjivanje koja je baza
			// 1-MySQL
			// 2-PostgreSQL
			// 3-SQL Server (jtds)
			// 4-SQL Server (Microsoft driver)
			// 5-H2
			// django podrzava za sada samo MySQL i PostgreSQL od gore navedenih
			if(databasePropertires.getProfile()==2){
				
			}
			
			
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
